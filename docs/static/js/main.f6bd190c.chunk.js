(this["webpackJsonpobject-detector"]=this["webpackJsonpobject-detector"]||[]).push([[0],{277:function(e,t,n){},283:function(e,t){},284:function(e,t){},292:function(e,t){},295:function(e,t){},296:function(e,t){},297:function(e,t,n){},298:function(e,t,n){"use strict";n.r(t);var o=n(40),c=n(54),r=n.n(c),s=n(231),i=n.n(s),a=(n(277),n(4)),l=n.n(a),d=n(12),u=n(6),h=n(190),b=n(130),j=(n(297),{initial:"initial",states:{initial:{on:{next:"startWebcam"}},startWebcam:{on:{next:"loadModel"}},loadModel:{on:{next:"identify"}},identify:{on:{next:"complete"}},complete:{on:{next:"identify"},showImage:!0,showResults:!0}}});var f=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=(t[0],t[1],Object(c.useState)(null)),r=Object(u.a)(n,2),s=r[0],i=r[1],a=Object(c.useState)("vww_128_color_bicycle_005_web_model/model.json"),f=Object(u.a)(a,2),p=f[0],w=f[1],v=Object(c.useState)(null),m=Object(u.a)(v,2),O=m[0],x=m[1],g=Object(c.useState)(!1),y=Object(u.a)(g,2),_=y[0],k=y[1],W=Object(c.useState)(null),S=Object(u.a)(W,2),M=S[0],C=S[1],D=Object(c.useState)(!1),L=Object(u.a)(D,2),I=L[0],F=L[1],E=Object(c.useState)(!1),N=Object(u.a)(E,2),V=N[0],A=N[1],B=Object(c.useRef)(),P=Object(c.useReducer)((function(e,t){return j.states[e].on[t]||j.initial}),j.initial),R=Object(u.a)(P,2),T=(R[0],R[1],function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading "+p+"..."),e.next=3,Object(b.a)(p);case 3:t=e.sent,console.log("Successfully loaded model"),i(t),F(!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),z=function(e){var t=e.percent;return Object(o.jsxs)("div",{className:"result",children:[Object(o.jsxs)("div",{className:"result-text",children:[t,"%"]}),Object(o.jsx)("div",{className:"result-bar",children:Object(o.jsx)("div",{className:"bar",style:{width:"".concat(t,"%")}})})]})},J=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices&&console.log("Let's get this party started"),navigator.mediaDevices.getUserMedia({video:!0}),e.next=5,navigator.mediaDevices.enumerateDevices();case 5:return t=e.sent,console.log(t),n={resizeWidth:128,resizeHeight:128,centerCrop:!1,facingMode:"environment"},e.next=10,h.a.webcam(B.current,n);case 10:o=e.sent,x(o),I||T();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,o,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.capture();case 2:return t=e.sent,n=h.b(127.5),o=t.sub(n).div(n).expandDims().reshape([-1,128,128,3]),e.next=7,s.execute(o);case 7:c=e.sent,console.log(c.dataSync()),r=c.dataSync(),C(Math.floor(100*r[1])),A(!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=setInterval((function(){I&&O&&U()}),1e3);return function(){clearInterval(e)}})),Object(c.useEffect)((function(){T()}),[p]),Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{id:"main",children:[Object(o.jsx)("h1",{children:"Visual Wake Words Explorer"}),Object(o.jsxs)("h2",{children:[Object(o.jsxs)("select",{value:p,onChange:function(e){F(!1),w(e.target.value),console.log(e.target.value)},children:[Object(o.jsx)("option",{value:"vww_128_color_bicycle_005_web_model/model.json",children:"\ud83d\udeb2 Bicycle"}),Object(o.jsx)("option",{value:"vww_128_color_dog_005_web_model/model.json",children:"\ud83d\udc15 Dog"}),Object(o.jsx)("option",{value:"vww_128_color_apple_005_web_model/model.json",children:"\ud83c\udf4e Apple"}),Object(o.jsx)("option",{value:"vww_128_color_car_005_web_model/model.json",children:"\ud83d\ude98 Car"})]}),"Detector"]}),!_&&Object(o.jsx)("button",{onClick:J,children:"Start Webcam"}),_&&Object(o.jsxs)("div",{id:"video-box",children:[Object(o.jsx)("video",{autoPlay:!0,playsInline:!0,muted:!0,id:"webcam",width:"500",height:"500",ref:B}),V&&Object(o.jsx)(z,{percent:M})]})]}),Object(o.jsx)("div",{id:"explainer",children:Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"What is this?"}),Object(o.jsxs)("p",{children:["An easy way to try different ",Object(o.jsx)("a",{href:"https://www.tensorflow.org/lite/microcontrollers",children:"TinyML"})," object recognition models so you can explore what angles work best."]}),Object(o.jsx)("h2",{children:"Why did you build this?"}),Object(o.jsxs)("p",{children:["We have been exploring ways to build ML \ud83e\udd16 ",Object(o.jsx)("a",{href:"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/micro/examples/person_detection",children:"vision models"})," that can run on microcontollers, like the ",Object(o.jsx)("a",{children:"Arduino"}),". Google's ",Object(o.jsx)("a",{href:"https://blog.tensorflow.org/2019/10/visual-wake-words-with-tensorflow-lite_30.html",children:"Visual Wake Words"})," (VWW) approach makes it easy to build a model focused on detecting a single type of object."]}),Object(o.jsxs)("p",{children:["VWW uses the ",Object(o.jsx)("a",{href:"https://cocodataset.org/#home",children:"COCO dataset"}),", which is made up of photos from Flickr where the objects in each photo have been labeled. When we started trying out models for detecting different types of objects, we found that they worked well for some views of that object, but failed horribly when viewed from a different angle. We think this is because photographers take photos of objects from common perspectives, but in the real-world you view the object from a wider range of perspectives."]}),Object(o.jsx)("p",{children:"We built this web app to make it easier for you to explore the blindspots models may have."}),Object(o.jsx)("h3",{children:"We think running ML in the real-world is the best way to find out how well it works!"})]})})]})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,299)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),o(e),c(e),r(e),s(e)}))};i.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(f,{})}),document.getElementById("root")),p()}},[[298,1,2]]]);
//# sourceMappingURL=main.f6bd190c.chunk.js.map